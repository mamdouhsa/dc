-- =====================================================
-- DANGER TABLOSUNU YENİDEN OLUŞTUR
-- =====================================================
-- Supabase SQL Editor'da bu komutları SIRASIZ LA çalıştırın

-- 1. ESKİ TABLOYU SİL (varsa)
DROP TABLE IF EXISTS public."Danger" CASCADE;

-- 2. YENİ TABLOYU OLUŞTUR
CREATE TABLE public."Danger" (
    "id" BIGINT GENERATED ALWAYS AS IDENTITY PRIMARY KEY,
    "Name" TEXT NOT NULL UNIQUE,
    "Uyarı" TIME NOT NULL DEFAULT '00:00:00'
);

-- 3. RLS'İ KAPAT
ALTER TABLE public."Danger" DISABLE ROW LEVEL SECURITY;

-- 4. VERİLERİ EKLE
INSERT INTO public."Danger" ("Name", "Uyarı") VALUES
('104', '00:00:00'),
('106', '00:00:00'),
('112', '00:00:00'),
('113', '00:00:00'),
('114', '00:00:00'),
('183', '00:00:00'),
('188', '00:00:00'),
('35', '00:00:00'),
('400', '00:00:00'),
('45', '00:00:00'),
('46', '00:00:00'),
('46A', '00:00:00'),
('503', '00:00:00'),
('506', '00:00:00'),
('507', '00:00:00'),
('508', '00:00:00'),
('509', '00:00:00'),
('511', '00:00:00'),
('512', '00:00:00'),
('513A', '00:00:00'),
('514', '00:00:00'),
('515', '00:00:00'),
('515A', '00:00:00'),
('521', '00:00:00'),
('521A', '00:00:00'),
('521B', '00:00:00'),
('521C', '00:00:00'),
('526', '00:00:00'),
('527', '00:00:00'),
('527A', '00:00:00'),
('528', '00:00:00'),
('531', '00:00:00'),
('531T', '00:00:00'),
('600', '00:00:00'),
('600G', '00:00:00'),
('800', '00:00:00'),
('AB07', '00:00:00'),
('AC03', '00:00:00'),
('AC05', '00:00:00'),
('AC05A', '00:00:00'),
('AC05B', '00:00:00'),
('AF04', '00:00:00'),
('AF04A', '00:00:00'),
('AÜ102', '00:00:00'),
('AÜ103', '00:00:00'),
('CV14', '00:00:00'),
('CV17', '00:00:00'),
('CV17A', '00:00:00'),
('CV39', '00:00:00'),
('CV47', '00:00:00'),
('CV48', '00:00:00'),
('CV67', '00:00:00'),
('D19', '00:00:00'),
('D19A', '00:00:00'),
('DC15', '00:00:00'),
('DC15A', '00:00:00'),
('DC27', '00:00:00'),
('DC79', '00:00:00'),
('DM85', '00:00:00'),
('DM85A', '00:00:00'),
('DM86', '00:00:00'),
('FL82', '00:00:00'),
('GCK60', '00:00:00'),
('GCK76A', '00:00:00'),
('GM24', '00:00:00'),
('HM42', '00:00:00'),
('KC06', '00:00:00'),
('KC33', '00:00:00'),
('KC34', '00:00:00'),
('KC34A', '00:00:00'),
('KC35A', '00:00:00'),
('KF52', '00:00:00'),
('KL08', '00:00:00'),
('KL08G', '00:00:00'),
('KL21', '00:00:00'),
('KM61', '00:00:00'),
('KPZ83', '00:00:00'),
('LC07A', '00:00:00'),
('LF09', '00:00:00'),
('LF10', '00:00:00'),
('MC12', '00:00:00'),
('MC12A', '00:00:00'),
('MC58', '00:00:00'),
('MC68', '00:00:00'),
('MD25', '00:00:00'),
('MD77', '00:00:00'),
('MD77A', '00:00:00'),
('MF40', '00:00:00'),
('MH90', '00:00:00'),
('MK80', '00:00:00'),
('MK80A', '00:00:00'),
('MK81', '00:00:00'),
('MK81A', '00:00:00'),
('ML22', '00:00:00'),
('MZ78', '00:00:00'),
('SA64', '00:00:00'),
('SA65', '00:00:00'),
('SD20', '00:00:00'),
('SD20A', '00:00:00'),
('SM62', '00:00:00'),
('TB72', '00:00:00'),
('TC16', '00:00:00'),
('TC16A', '00:00:00'),
('TC45', '00:00:00'),
('TCD49', '00:00:00'),
('TCD49A', '00:00:00'),
('TH88', '00:00:00'),
('THG91', '00:00:00'),
('TK36', '00:00:00'),
('TK51', '00:00:00'),
('TK51A', '00:00:00'),
('TL94', '00:00:00'),
('TR30', '00:00:00'),
('TY23', '00:00:00'),
('UC11', '00:00:00'),
('UC32', '00:00:00'),
('VC53', '00:00:00'),
('VC57', '00:00:00'),
('VC59', '00:00:00'),
('VF01', '00:00:00'),
('VF63', '00:00:00'),
('VF66', '00:00:00'),
('VH89', '00:00:00'),
('VH89A', '00:00:00'),
('VL13', '00:00:00'),
('VL13A', '00:00:00'),
('VML54', '00:00:00'),
('VML54A', '00:00:00'),
('VML55', '00:00:00'),
('VS18', '00:00:00'),
('ÜA26', '00:00:00'),
('ÜK28', '00:00:00'),
('ÜS29', '00:00:00');

-- 5. KONTROL: Kaç kayıt eklendi?
SELECT COUNT(*) as "TOPLAM_KAYIT" FROM public."Danger";

-- 6. KONTROL: İlk 5 kaydı göster
SELECT "id", "Name", "Uyarı" FROM public."Danger" LIMIT 5;

-- 7. KONTROL: RLS kapalı mı?
SELECT tablename, rowsecurity as "RLS_AÇIK_MI" 
FROM pg_tables 
WHERE tablename = 'Danger';

-- Beklenen: 133 kayıt, rowsecurity = false

-- =====================================================
-- ✅ TAMAMLANDI!
-- =====================================================
-- Artık test_danger.html sayfasını yenileyip test edebilirsiniz.
